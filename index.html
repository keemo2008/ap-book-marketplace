<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AP Book Exchange - Affordable Books for Students</title>
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        }
        .book-card {
            transition: transform 0.2s, box-shadow 0.2s;
        }
        .book-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .condition-excellent { background: #10b981; }
        .condition-good { background: #3b82f6; }
        .condition-fair { background: #f59e0b; }
        .condition-acceptable { background: #ef4444; }
    </style>
</head>
<body class="bg-gray-50">
    <div id="root"></div>

    <script type="text/babel">
        const { useState } = React;

        // Sample data
        const initialBooks = [
            {
                id: 1,
                title: "Princeton Review AP Biology Premium Prep",
                subject: "Biology",
                edition: "26th Edition",
                condition: "Good",
                price: 5,
                originalPrice: 42,
                seller: "Kareem Megid",
                sellerEmail: "kmegid2008@gmail.com",
                description: "Includes 6 full-length practice tests and complete content review. Good condition with minor wear.",
                image: "üìö",
                listingType: "sell"
            },
            {
                id: 2,
                title: "Barron's AP Computer Science Principles",
                subject: "Computer Science",
                edition: "2020-2021",
                condition: "Good",
                price: 5,
                originalPrice: 34,
                seller: "Kareem Megid",
                sellerEmail: "kmegid2008@gmail.com",
                description: "Comprehensive content review with 4 practice tests. Good condition.",
                image: "üíª",
                listingType: "sell"
            },
            {
                id: 3,
                title: "Princeton Review AP Psychology Premium Prep",
                subject: "Psychology",
                edition: "2022",
                condition: "Good",
                price: 5,
                originalPrice: 40,
                seller: "Kareem Megid",
                sellerEmail: "kmegid2008@gmail.com",
                description: "5 full-length practice tests with proven techniques for success. Good condition.",
                image: "üß†",
                listingType: "sell"
            },
            {
                id: 4,
                title: "Pearson AP Biology Test Prep Series",
                subject: "Biology",
                edition: "Campbell Edition",
                condition: "Good",
                price: 5,
                originalPrice: 38,
                seller: "Kareem Megid",
                sellerEmail: "kmegid2008@gmail.com",
                description: "Companion to Campbell Biology programs. Good condition with some wear.",
                image: "üî¨",
                listingType: "sell"
            },
            {
                id: 5,
                title: "5 Steps to a 5: AP Psychology",
                subject: "Psychology",
                edition: "2021",
                condition: "Good",
                price: 5,
                originalPrice: 36,
                seller: "Kareem Megid",
                sellerEmail: "kmegid2008@gmail.com",
                description: "Cross-platform prep course with 3 practice exams. Good condition.",
                image: "üìñ",
                listingType: "sell"
            }
        ];

        function App() {
            const [currentView, setCurrentView] = useState('login');
            const [books, setBooks] = useState(initialBooks);
            const [selectedBook, setSelectedBook] = useState(null);
            const [searchTerm, setSearchTerm] = useState('');
            const [filterSubject, setFilterSubject] = useState('all');
            const [filterType, setFilterType] = useState('all');
            const [savedBooks, setSavedBooks] = useState([]);
            const [myListings, setMyListings] = useState([]);
            const [messages, setMessages] = useState([]);
            const [showContactModal, setShowContactModal] = useState(false);
            const [isLoggedIn, setIsLoggedIn] = useState(false);
            const [currentUser, setCurrentUser] = useState(null);
            const [users, setUsers] = useState([
                { id: 1, email: 'demo@student.com', password: 'demo123', name: 'Demo Student', bio: 'AP student looking for affordable books!' }
            ]);

            const subjects = ['all', 'Biology', 'Chemistry', 'Mathematics', 'History', 'English', 'Physics', 'Psychology'];

            const filteredBooks = books.filter(book => {
                const matchesSearch = book.title.toLowerCase().includes(searchTerm.toLowerCase()) ||
                                    book.subject.toLowerCase().includes(searchTerm.toLowerCase());
                const matchesSubject = filterSubject === 'all' || book.subject === filterSubject;
                const matchesType = filterType === 'all' || book.listingType === filterType;
                return matchesSearch && matchesSubject && matchesType;
            });

            const totalSavings = books.reduce((sum, book) => sum + (book.originalPrice - book.price), 0);

            // Authentication handlers
            const handleLogin = (email, password) => {
                const user = users.find(u => u.email === email && u.password === password);
                if (user) {
                    setCurrentUser(user);
                    setIsLoggedIn(true);
                    setCurrentView('browse');
                    return true;
                }
                return false;
            };

            const handleSignup = (email, password, name) => {
                const existingUser = users.find(u => u.email === email);
                if (existingUser) {
                    return { success: false, message: 'Email already exists' };
                }
                const newUser = {
                    id: users.length + 1,
                    email,
                    password,
                    name,
                    bio: ''
                };
                setUsers([...users, newUser]);
                setCurrentUser(newUser);
                setIsLoggedIn(true);
                setCurrentView('browse');
                return { success: true };
            };

            const handleLogout = () => {
                setCurrentUser(null);
                setIsLoggedIn(false);
                setCurrentView('login');
                setSavedBooks([]);
                setMyListings([]);
                setMessages([]);
            };

            const updateProfile = (updatedData) => {
                const updatedUser = { ...currentUser, ...updatedData };
                setCurrentUser(updatedUser);
                setUsers(users.map(u => u.id === updatedUser.id ? updatedUser : u));
            };

            // Handler functions
            const toggleSaveBook = (bookId) => {
                if (savedBooks.includes(bookId)) {
                    setSavedBooks(savedBooks.filter(id => id !== bookId));
                } else {
                    setSavedBooks([...savedBooks, bookId]);
                }
            };

            const handleContactSeller = (book) => {
                setSelectedBook(book);
                setShowContactModal(true);
            };

            const sendMessage = (book, message) => {
                const newMessage = {
                    id: messages.length + 1,
                    bookId: book.id,
                    bookTitle: book.title,
                    seller: book.seller,
                    message: message,
                    timestamp: new Date().toISOString(),
                    from: currentUser.name,
                    read: false
                };
                setMessages([...messages, newMessage]);
                setShowContactModal(false);
                alert('Message sent to ' + book.seller + '!');
            };

            const deleteMyListing = (bookId) => {
                if (confirm('Are you sure you want to delete this listing?')) {
                    setBooks(books.filter(b => b.id !== bookId));
                    setMyListings(myListings.filter(id => id !== bookId));
                }
            };

            const editMyListing = (book) => {
                setSelectedBook(book);
                setCurrentView('edit');
            };

            return (
                <div className="min-h-screen flex flex-col">
                    {/* Show login/signup if not logged in */}
                    {!isLoggedIn && (currentView === 'login' || currentView === 'signup') && (
                        <>
                            {currentView === 'login' && (
                                <Login 
                                    onLogin={handleLogin}
                                    onSwitchToSignup={() => setCurrentView('signup')}
                                />
                            )}
                            {currentView === 'signup' && (
                                <Signup 
                                    onSignup={handleSignup}
                                    onSwitchToLogin={() => setCurrentView('login')}
                                />
                            )}
                        </>
                    )}

                    {/* Main app - only show when logged in */}
                    {isLoggedIn && (
                        <>
                    {/* Header */}
                    <header className="bg-gradient-to-r from-blue-600 to-indigo-600 text-white shadow-lg sticky top-0 z-50">
                        <div className="max-w-6xl mx-auto px-4 py-4">
                            <div className="flex items-center justify-between">
                                <div className="flex items-center space-x-2">
                                    <span className="text-3xl">üìö</span>
                                    <div>
                                        <h1 className="text-xl font-bold">AP Book Exchange</h1>
                                        <p className="text-xs text-blue-100">Affordable books for all students</p>
                                    </div>
                                </div>
                                <div className="flex items-center space-x-4">
                                    <div className="bg-white/20 px-3 py-1 rounded-full text-sm">
                                        <span className="font-semibold">${totalSavings}</span> saved!
                                    </div>
                                    <button
                                        onClick={handleLogout}
                                        className="bg-white/20 hover:bg-white/30 px-3 py-1 rounded-full text-sm transition-colors"
                                    >
                                        Logout
                                    </button>
                                </div>
                            </div>
                        </div>
                    </header>

                    {/* Navigation */}
                    <nav className="bg-white shadow-sm border-b sticky top-[72px] z-40">
                        <div className="max-w-6xl mx-auto px-4">
                            <div className="flex space-x-1 overflow-x-auto py-2">
                                <NavButton 
                                    active={currentView === 'browse'} 
                                    onClick={() => setCurrentView('browse')}
                                    icon="üîç"
                                >
                                    Browse Books
                                </NavButton>
                                <NavButton 
                                    active={currentView === 'list'} 
                                    onClick={() => setCurrentView('list')}
                                    icon="‚ûï"
                                >
                                    List a Book
                                </NavButton>
                                <NavButton 
                                    active={currentView === 'profile'} 
                                    onClick={() => setCurrentView('profile')}
                                    icon="üë§"
                                >
                                    Profile
                                </NavButton>
                            </div>
                        </div>
                    </nav>

                    {/* Main Content */}
                    <main className="flex-1 max-w-6xl mx-auto px-4 py-6 w-full">
                        {currentView === 'browse' && (
                            <BrowseBooks 
                                books={filteredBooks}
                                searchTerm={searchTerm}
                                setSearchTerm={setSearchTerm}
                                filterSubject={filterSubject}
                                setFilterSubject={setFilterSubject}
                                filterType={filterType}
                                setFilterType={setFilterType}
                                subjects={subjects}
                                savedBooks={savedBooks}
                                toggleSaveBook={toggleSaveBook}
                                onSelectBook={(book) => {
                                    setSelectedBook(book);
                                    setCurrentView('detail');
                                }}
                            />
                        )}

                        {currentView === 'list' && (
                            <ListBook onBookAdded={(newBook) => {
                                const bookWithId = { ...newBook, id: books.length + 1 };
                                setBooks([...books, bookWithId]);
                                setMyListings([...myListings, bookWithId.id]);
                                setCurrentView('browse');
                                alert('Book listed successfully!');
                            }} />
                        )}

                        {currentView === 'profile' && (
                            <Profile 
                                onNavigate={setCurrentView}
                                myListingsCount={myListings.length}
                                savedBooksCount={savedBooks.length}
                                messagesCount={messages.filter(m => !m.read).length}
                                totalSavings={totalSavings}
                                currentUser={currentUser}
                            />
                        )}

                        {currentView === 'detail' && selectedBook && (
                            <BookDetail 
                                book={selectedBook} 
                                onBack={() => setCurrentView('browse')}
                                onContactSeller={() => handleContactSeller(selectedBook)}
                                isSaved={savedBooks.includes(selectedBook.id)}
                                toggleSave={() => toggleSaveBook(selectedBook.id)}
                            />
                        )}

                        {currentView === 'mylistings' && (
                            <MyListings 
                                books={books.filter(b => myListings.includes(b.id))}
                                onEdit={editMyListing}
                                onDelete={deleteMyListing}
                                onBack={() => setCurrentView('profile')}
                            />
                        )}

                        {currentView === 'messages' && (
                            <Messages 
                                messages={messages}
                                onBack={() => setCurrentView('profile')}
                                setMessages={setMessages}
                            />
                        )}

                        {currentView === 'saved' && (
                            <SavedBooks 
                                books={books.filter(b => savedBooks.includes(b.id))}
                                onSelectBook={(book) => {
                                    setSelectedBook(book);
                                    setCurrentView('detail');
                                }}
                                onUnsave={toggleSaveBook}
                                onBack={() => setCurrentView('profile')}
                            />
                        )}

                        {currentView === 'settings' && (
                            <Settings 
                                onBack={() => setCurrentView('profile')}
                                currentUser={currentUser}
                                updateProfile={updateProfile}
                            />
                        )}

                        {currentView === 'editprofile' && (
                            <EditProfile 
                                currentUser={currentUser}
                                onSave={updateProfile}
                                onBack={() => setCurrentView('profile')}
                            />
                        )}

                        {currentView === 'edit' && selectedBook && (
                            <EditBook 
                                book={selectedBook}
                                onSave={(updatedBook) => {
                                    setBooks(books.map(b => b.id === updatedBook.id ? updatedBook : b));
                                    setCurrentView('mylistings');
                                    alert('Book updated successfully!');
                                }}
                                onCancel={() => setCurrentView('mylistings')}
                            />
                        )}
                    </main>

                    {/* Contact Seller Modal */}
                    {showContactModal && selectedBook && (
                        <ContactModal 
                            book={selectedBook}
                            onClose={() => setShowContactModal(false)}
                            onSend={(message) => sendMessage(selectedBook, message)}
                        />
                    )}

                    {/* Footer */}
                    <footer className="bg-gray-800 text-gray-300 py-8 mt-12">
                        <div className="max-w-6xl mx-auto px-4 text-center">
                            <p className="text-sm">üéì Making education affordable, one book at a time</p>
                            <p className="text-xs mt-2 text-gray-400">Safe trades ‚Ä¢ Student verified ‚Ä¢ Community driven</p>
                        </div>
                    </footer>
                    </>
                    )}
                </div>
            );
        }

        function NavButton({ children, active, onClick, icon }) {
            return (
                <button
                    onClick={onClick}
                    className={`flex items-center space-x-2 px-4 py-2 rounded-lg font-medium transition-colors whitespace-nowrap ${
                        active 
                            ? 'bg-blue-100 text-blue-700' 
                            : 'text-gray-600 hover:bg-gray-100'
                    }`}
                >
                    <span>{icon}</span>
                    <span>{children}</span>
                </button>
            );
        }

        function BrowseBooks({ books, searchTerm, setSearchTerm, filterSubject, setFilterSubject, filterType, setFilterType, subjects, savedBooks, toggleSaveBook, onSelectBook }) {
            return (
                <div>
                    {/* Search and Filters */}
                    <div className="mb-6 space-y-4">
                        <input
                            type="text"
                            placeholder="Search by title or subject..."
                            value={searchTerm}
                            onChange={(e) => setSearchTerm(e.target.value)}
                            className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                        />
                        
                        <div className="flex flex-wrap gap-2">
                            <select 
                                value={filterSubject}
                                onChange={(e) => setFilterSubject(e.target.value)}
                                className="px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                            >
                                {subjects.map(subject => (
                                    <option key={subject} value={subject}>
                                        {subject === 'all' ? 'All Subjects' : subject}
                                    </option>
                                ))}
                            </select>

                            <select 
                                value={filterType}
                                onChange={(e) => setFilterType(e.target.value)}
                                className="px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                            >
                                <option value="all">All Types</option>
                                <option value="sell">For Sale</option>
                                <option value="donate">Free/Donate</option>
                                <option value="trade">Trade</option>
                            </select>
                        </div>
                    </div>

                    {/* Books Grid */}
                    <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                        {books.map(book => (
                            <BookCard 
                                key={book.id} 
                                book={book} 
                                onClick={() => onSelectBook(book)}
                                isSaved={savedBooks.includes(book.id)}
                                onToggleSave={(e) => {
                                    e.stopPropagation();
                                    toggleSaveBook(book.id);
                                }}
                            />
                        ))}
                    </div>

                    {books.length === 0 && (
                        <div className="text-center py-12">
                            <p className="text-xl text-gray-500">No books found matching your criteria</p>
                            <p className="text-sm text-gray-400 mt-2">Try adjusting your filters or search term</p>
                        </div>
                    )}
                </div>
            );
        }

        function BookCard({ book, onClick, isSaved, onToggleSave }) {
            const savings = book.originalPrice - book.price;
            const savingsPercent = Math.round((savings / book.originalPrice) * 100);

            return (
                <div 
                    onClick={onClick}
                    className="book-card bg-white rounded-lg shadow-md p-4 cursor-pointer border-2 border-transparent hover:border-blue-300 relative"
                >
                    <button
                        onClick={onToggleSave}
                        className="absolute top-2 right-2 text-2xl hover:scale-110 transition-transform z-10"
                        title={isSaved ? "Remove from saved" : "Save for later"}
                    >
                        {isSaved ? '‚ù§Ô∏è' : 'ü§ç'}
                    </button>

                    <div className="flex items-start justify-between mb-3">
                        <div className="text-4xl">{book.image}</div>
                        <div className="flex flex-col items-end">
                            {book.price === 0 ? (
                                <span className="text-2xl font-bold text-green-600">FREE</span>
                            ) : (
                                <>
                                    <span className="text-2xl font-bold text-blue-600">${book.price}</span>
                                    <span className="text-xs text-gray-400 line-through">${book.originalPrice}</span>
                                </>
                            )}
                        </div>
                    </div>

                    <h3 className="font-bold text-gray-900 mb-1">{book.title}</h3>
                    <p className="text-sm text-gray-600 mb-2">{book.subject} ‚Ä¢ {book.edition}</p>
                    
                    <div className="flex items-center justify-between mb-3">
                        <span className={`text-xs px-2 py-1 rounded-full text-white condition-${book.condition.toLowerCase()}`}>
                            {book.condition}
                        </span>
                    </div>

                    <div className="mt-2 pt-2 border-t">
                        <span className="text-xs px-2 py-1 bg-gray-100 rounded">
                            {book.listingType === 'donate' ? 'üíù Free' : book.listingType === 'trade' ? 'üîÑ Trade' : 'üí∞ Sale'}
                        </span>
                    </div>
                </div>
            );
        }

        function BookDetail({ book, onBack, onContactSeller, isSaved, toggleSave }) {
            return (
                <div className="max-w-2xl mx-auto">
                    <button 
                        onClick={onBack}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Back to Browse
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6 relative">
                        <button
                            onClick={toggleSave}
                            className="absolute top-4 right-4 text-3xl hover:scale-110 transition-transform"
                            title={isSaved ? "Remove from saved" : "Save for later"}
                        >
                            {isSaved ? '‚ù§Ô∏è' : 'ü§ç'}
                        </button>
                        <div className="flex items-start justify-between mb-4">
                            <div className="text-6xl">{book.image}</div>
                            <div className="text-right">
                                {book.price === 0 ? (
                                    <div className="text-3xl font-bold text-green-600">FREE</div>
                                ) : (
                                    <>
                                        <div className="text-3xl font-bold text-blue-600">${book.price}</div>
                                        <div className="text-sm text-gray-400 line-through">${book.originalPrice}</div>
                                        <div className="text-sm font-semibold text-green-600">
                                            Save ${book.originalPrice - book.price}
                                        </div>
                                    </>
                                )}
                            </div>
                        </div>

                        <h1 className="text-2xl font-bold text-gray-900 mb-2">{book.title}</h1>
                        <p className="text-gray-600 mb-4">{book.subject} ‚Ä¢ Edition: {book.edition}</p>

                        <div className="grid grid-cols-2 gap-4 mb-6">
                            <div className="bg-gray-50 p-3 rounded">
                                <div className="text-xs text-gray-500 mb-1">Condition</div>
                                <div className={`text-sm font-semibold px-2 py-1 rounded text-white inline-block condition-${book.condition.toLowerCase()}`}>
                                    {book.condition}
                                </div>
                            </div>
                            <div className="bg-gray-50 p-3 rounded">
                                <div className="text-xs text-gray-500 mb-1">Listing Type</div>
                                <div className="text-sm font-semibold">
                                    {book.listingType === 'donate' ? 'üíù Free/Donate' : 
                                     book.listingType === 'trade' ? 'üîÑ Trade' : 'üí∞ For Sale'}
                                </div>
                            </div>
                        </div>

                        <div className="mb-6">
                            <h3 className="font-semibold mb-2">Description</h3>
                            <p className="text-gray-700">{book.description}</p>
                        </div>

                        <div className="mb-6 p-4 bg-blue-50 rounded-lg">
                            <h3 className="font-semibold mb-2 flex items-center">
                                <span className="mr-2">üë§</span> Seller Information
                            </h3>
                            <p className="text-sm text-gray-700">
                                <strong>{book.seller}</strong>
                            </p>
                            {book.sellerEmail && (
                                <p className="text-sm text-gray-600 mt-1">
                                    üìß {book.sellerEmail}
                                </p>
                            )}
                        </div>

                        <button 
                            onClick={onContactSeller}
                            className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                        >
                            üí¨ Contact Seller
                        </button>
                    </div>
                </div>
            );
        }

        function ListBook({ onBookAdded }) {
            const [formData, setFormData] = useState({
                title: '',
                subject: 'Biology',
                edition: '',
                condition: 'Good',
                price: '',
                originalPrice: '',
                description: '',
                listingType: 'sell'
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                onBookAdded({
                    ...formData,
                    price: formData.listingType === 'donate' ? 0 : parseFloat(formData.price),
                    originalPrice: parseFloat(formData.originalPrice),
                    seller: 'You',
                    image: 'üìö'
                });
            };

            return (
                <div className="max-w-2xl mx-auto">
                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">List Your AP Book</h2>
                        
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold mb-2">Listing Type</label>
                                <select
                                    value={formData.listingType}
                                    onChange={(e) => setFormData({...formData, listingType: e.target.value})}
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                >
                                    <option value="sell">üí∞ Sell</option>
                                    <option value="donate">üíù Donate (Free)</option>
                                    <option value="trade">üîÑ Trade</option>
                                </select>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Book Title *</label>
                                <input
                                    type="text"
                                    value={formData.title}
                                    onChange={(e) => setFormData({...formData, title: e.target.value})}
                                    placeholder="AP Biology, AP Calculus AB, etc."
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-semibold mb-2">Subject *</label>
                                    <select
                                        value={formData.subject}
                                        onChange={(e) => setFormData({...formData, subject: e.target.value})}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                        required
                                    >
                                        <option>Biology</option>
                                        <option>Chemistry</option>
                                        <option>Physics</option>
                                        <option>Mathematics</option>
                                        <option>History</option>
                                        <option>English</option>
                                        <option>Psychology</option>
                                        <option>Other</option>
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold mb-2">Edition Year *</label>
                                    <input
                                        type="text"
                                        value={formData.edition}
                                        onChange={(e) => setFormData({...formData, edition: e.target.value})}
                                        placeholder="2024"
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                        required
                                    />
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Condition *</label>
                                <select
                                    value={formData.condition}
                                    onChange={(e) => setFormData({...formData, condition: e.target.value})}
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                >
                                    <option>Excellent</option>
                                    <option>Good</option>
                                    <option>Fair</option>
                                    <option>Acceptable</option>
                                </select>
                                <p className="text-xs text-gray-500 mt-1">
                                    Excellent: Like new ‚Ä¢ Good: Minor wear ‚Ä¢ Fair: Visible wear ‚Ä¢ Acceptable: Heavy wear
                                </p>
                            </div>

                            {formData.listingType !== 'donate' && (
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-semibold mb-2">Your Price * ($)</label>
                                        <input
                                            type="number"
                                            value={formData.price}
                                            onChange={(e) => setFormData({...formData, price: e.target.value})}
                                            placeholder="25"
                                            min="0"
                                            step="0.01"
                                            className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                            required
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-semibold mb-2">Original Price ($)</label>
                                        <input
                                            type="number"
                                            value={formData.originalPrice}
                                            onChange={(e) => setFormData({...formData, originalPrice: e.target.value})}
                                            placeholder="65"
                                            min="0"
                                            step="0.01"
                                            className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                            required
                                        />
                                    </div>
                                </div>
                            )}

                            {formData.listingType === 'donate' && (
                                <div>
                                    <label className="block text-sm font-semibold mb-2">Original Price ($)</label>
                                    <input
                                        type="number"
                                        value={formData.originalPrice}
                                        onChange={(e) => setFormData({...formData, originalPrice: e.target.value})}
                                        placeholder="65"
                                        min="0"
                                        step="0.01"
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                        required
                                    />
                                    <p className="text-xs text-gray-500 mt-1">
                                        This helps show students how much they're saving!
                                    </p>
                                </div>
                            )}

                            <div>
                                <label className="block text-sm font-semibold mb-2">Description *</label>
                                <textarea
                                    value={formData.description}
                                    onChange={(e) => setFormData({...formData, description: e.target.value})}
                                    placeholder="Describe the book's condition, any highlighting, missing pages, etc."
                                    rows="4"
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div className="bg-blue-50 p-4 rounded-lg">
                                <h4 className="font-semibold text-sm mb-2">üì∏ Photo Upload (Coming Soon)</h4>
                                <p className="text-xs text-gray-600">
                                    The ability to upload photos will be added in the next version. For now, your listing will use a default book icon.
                                </p>
                            </div>

                            <button
                                type="submit"
                                className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                            >
                                üìö List My Book
                            </button>
                        </form>
                    </div>
                </div>
            );
        }

        function Profile({ onNavigate, myListingsCount, savedBooksCount, messagesCount, totalSavings, currentUser }) {
            return (
                <div className="max-w-2xl mx-auto">
                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <div className="flex items-center mb-6">
                            <div className="w-20 h-20 bg-blue-100 rounded-full flex items-center justify-center text-3xl">
                                üë§
                            </div>
                            <div className="ml-4 flex-1">
                                <h2 className="text-2xl font-bold">{currentUser.name}</h2>
                                {currentUser.bio && <p className="text-sm text-gray-600 mt-1">{currentUser.bio}</p>}
                            </div>
                            <button
                                onClick={() => onNavigate('editprofile')}
                                className="ml-4 px-3 py-1 bg-blue-600 text-white rounded-lg hover:bg-blue-700 text-sm"
                            >
                                ‚úèÔ∏è Edit
                            </button>
                        </div>

                        <div className="grid grid-cols-3 gap-4 mb-6">
                            <div className="bg-blue-50 p-4 rounded-lg text-center">
                                <div className="text-2xl font-bold text-blue-600">{myListingsCount}</div>
                                <div className="text-sm text-gray-600">Books Listed</div>
                            </div>
                            <div className="bg-green-50 p-4 rounded-lg text-center">
                                <div className="text-2xl font-bold text-green-600">${totalSavings}</div>
                                <div className="text-sm text-gray-600">Community Savings</div>
                            </div>
                            <div className="bg-purple-50 p-4 rounded-lg text-center">
                                <div className="text-2xl font-bold text-purple-600">{savedBooksCount}</div>
                                <div className="text-sm text-gray-600">Saved Books</div>
                            </div>
                        </div>

                        <div className="space-y-4">
                            <button 
                                onClick={() => onNavigate('mylistings')}
                                className="w-full text-left px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"
                            >
                                <div className="font-semibold">üìö My Listings</div>
                                <div className="text-sm text-gray-600">Manage your active book listings ({myListingsCount})</div>
                            </button>

                            <button 
                                onClick={() => onNavigate('messages')}
                                className="w-full text-left px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors relative"
                            >
                                <div className="font-semibold">üí¨ Messages</div>
                                <div className="text-sm text-gray-600">Chat with buyers and sellers</div>
                                {messagesCount > 0 && (
                                    <span className="absolute top-2 right-2 bg-red-500 text-white text-xs px-2 py-1 rounded-full">
                                        {messagesCount}
                                    </span>
                                )}
                            </button>

                            <button 
                                onClick={() => onNavigate('saved')}
                                className="w-full text-left px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"
                            >
                                <div className="font-semibold">‚ù§Ô∏è Saved Books</div>
                                <div className="text-sm text-gray-600">Books you're interested in ({savedBooksCount})</div>
                            </button>

                            <button 
                                onClick={() => onNavigate('settings')}
                                className="w-full text-left px-4 py-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors"
                            >
                                <div className="font-semibold">‚öôÔ∏è Settings</div>
                                <div className="text-sm text-gray-600">Account and notification preferences</div>
                            </button>
                        </div>

                        <div className="mt-6 p-4 bg-green-50 border border-green-200 rounded-lg">
                            <h4 className="font-semibold text-sm mb-2 flex items-center text-green-800">
                                <span className="mr-2">üåü</span> Community Impact
                            </h4>
                            <p className="text-sm text-green-700">
                                By sharing books, you've helped save fellow students $85 and kept books in use instead of going to waste. Keep it up!
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        function ContactModal({ book, onClose, onSend }) {
            const [message, setMessage] = useState('');

            const handleSendEmail = () => {
                const subject = encodeURIComponent(`Interested in: ${book.title}`);
                const body = encodeURIComponent(message || `Hi ${book.seller},\n\nI'm interested in purchasing your ${book.title}. Is it still available?\n\nThanks!`);
                const mailtoLink = `mailto:${book.sellerEmail}?subject=${subject}&body=${body}`;
                window.location.href = mailtoLink;
                onClose();
            };

            return (
                <div className="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4">
                    <div className="bg-white rounded-lg p-6 max-w-md w-full">
                        <div className="flex justify-between items-center mb-4">
                            <h3 className="text-xl font-bold">Contact Seller</h3>
                            <button 
                                onClick={onClose}
                                className="text-2xl text-gray-400 hover:text-gray-600"
                            >
                                √ó
                            </button>
                        </div>

                        <div className="mb-4 p-3 bg-gray-50 rounded">
                            <p className="text-sm text-gray-600">Book: <strong>{book.title}</strong></p>
                            <p className="text-sm text-gray-600">Seller: <strong>{book.seller}</strong></p>
                            <p className="text-sm text-gray-600">Email: <strong>{book.sellerEmail}</strong></p>
                        </div>

                        <textarea
                            value={message}
                            onChange={(e) => setMessage(e.target.value)}
                            placeholder={`Hi ${book.seller},\n\nI'm interested in purchasing your ${book.title}. Is it still available?\n\nThanks!`}
                            rows="6"
                            className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none mb-4"
                        />

                        <p className="text-xs text-gray-500 mb-4">
                            üìß This will open your email app with the message ready to send.
                        </p>

                        <div className="flex space-x-2">
                            <button
                                onClick={onClose}
                                className="flex-1 px-4 py-2 border-2 border-gray-300 rounded-lg hover:bg-gray-50"
                            >
                                Cancel
                            </button>
                            <button
                                onClick={handleSendEmail}
                                className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                            >
                                Open Email
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function MyListings({ books, onEdit, onDelete, onBack }) {
            return (
                <div className="max-w-4xl mx-auto">
                    <button 
                        onClick={onBack}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Back to Profile
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">My Listings</h2>

                        {books.length === 0 ? (
                            <div className="text-center py-12">
                                <p className="text-xl text-gray-500 mb-4">You haven't listed any books yet</p>
                                <p className="text-sm text-gray-400">Start selling your books to help other students!</p>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                {books.map(book => (
                                    <div key={book.id} className="border-2 border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors">
                                        <div className="flex items-start justify-between">
                                            <div className="flex items-start space-x-4 flex-1">
                                                <div className="text-4xl">{book.image}</div>
                                                <div className="flex-1">
                                                    <h3 className="font-bold text-lg">{book.title}</h3>
                                                    <p className="text-sm text-gray-600">{book.subject} ‚Ä¢ {book.edition}</p>
                                                    <p className="text-sm text-gray-500 mt-1">{book.description}</p>
                                                    <div className="mt-2">
                                                        <span className={`text-xs px-2 py-1 rounded text-white condition-${book.condition.toLowerCase()}`}>
                                                            {book.condition}
                                                        </span>
                                                    </div>
                                                </div>
                                            </div>
                                            <div className="text-right ml-4">
                                                {book.price === 0 ? (
                                                    <div className="text-xl font-bold text-green-600">FREE</div>
                                                ) : (
                                                    <div className="text-xl font-bold text-blue-600">${book.price}</div>
                                                )}
                                            </div>
                                        </div>
                                        <div className="flex space-x-2 mt-4">
                                            <button
                                                onClick={() => onEdit(book)}
                                                className="flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700"
                                            >
                                                ‚úèÔ∏è Edit
                                            </button>
                                            <button
                                                onClick={() => onDelete(book.id)}
                                                className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
                                            >
                                                üóëÔ∏è Delete
                                            </button>
                                        </div>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function Messages({ messages, onBack, setMessages }) {
            const markAsRead = (messageId) => {
                setMessages(messages.map(m => m.id === messageId ? {...m, read: true} : m));
            };

            return (
                <div className="max-w-4xl mx-auto">
                    <button 
                        onClick={onBack}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Back to Profile
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">Messages</h2>

                        {messages.length === 0 ? (
                            <div className="text-center py-12">
                                <p className="text-xl text-gray-500 mb-4">No messages yet</p>
                                <p className="text-sm text-gray-400">Your conversations with buyers and sellers will appear here</p>
                            </div>
                        ) : (
                            <div className="space-y-4">
                                {messages.map(msg => (
                                    <div 
                                        key={msg.id} 
                                        className={`border-2 rounded-lg p-4 ${msg.read ? 'border-gray-200' : 'border-blue-300 bg-blue-50'}`}
                                        onClick={() => markAsRead(msg.id)}
                                    >
                                        <div className="flex justify-between items-start mb-2">
                                            <div>
                                                <h3 className="font-bold">{msg.bookTitle}</h3>
                                                <p className="text-sm text-gray-600">To: {msg.seller}</p>
                                            </div>
                                            <span className="text-xs text-gray-400">
                                                {new Date(msg.timestamp).toLocaleString()}
                                            </span>
                                        </div>
                                        <p className="text-gray-700">{msg.message}</p>
                                        {!msg.read && (
                                            <span className="inline-block mt-2 text-xs bg-blue-600 text-white px-2 py-1 rounded">
                                                New
                                            </span>
                                        )}
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function SavedBooks({ books, onSelectBook, onUnsave, onBack }) {
            return (
                <div className="max-w-4xl mx-auto">
                    <button 
                        onClick={onBack}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Back to Profile
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">Saved Books</h2>

                        {books.length === 0 ? (
                            <div className="text-center py-12">
                                <p className="text-xl text-gray-500 mb-4">No saved books yet</p>
                                <p className="text-sm text-gray-400">Click the heart icon on any book to save it for later</p>
                            </div>
                        ) : (
                            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                                {books.map(book => (
                                    <div key={book.id} className="relative">
                                        <BookCard 
                                            book={book} 
                                            onClick={() => onSelectBook(book)}
                                            isSaved={true}
                                            onToggleSave={(e) => {
                                                e.stopPropagation();
                                                onUnsave(book.id);
                                            }}
                                        />
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        }

        function Settings({ onBack, currentUser, updateProfile }) {
            const [settings, setSettings] = useState({
                notifications: true,
                emailUpdates: true,
                showLocation: false,
            });

            return (
                <div className="max-w-2xl mx-auto">
                    <button 
                        onClick={onBack}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Back to Profile
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">Settings</h2>

                        <div className="space-y-6">
                            <div>
                                <h3 className="font-semibold mb-4">Notifications</h3>
                                <div className="space-y-3">
                                    <label className="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer">
                                        <span>Push Notifications</span>
                                        <input 
                                            type="checkbox" 
                                            checked={settings.notifications}
                                            onChange={(e) => setSettings({...settings, notifications: e.target.checked})}
                                            className="w-5 h-5"
                                        />
                                    </label>
                                    <label className="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer">
                                        <span>Email Updates</span>
                                        <input 
                                            type="checkbox" 
                                            checked={settings.emailUpdates}
                                            onChange={(e) => setSettings({...settings, emailUpdates: e.target.checked})}
                                            className="w-5 h-5"
                                        />
                                    </label>
                                </div>
                            </div>

                            <div>
                                <h3 className="font-semibold mb-4">Privacy</h3>
                                <div className="space-y-3">
                                    <label className="flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer">
                                        <div>
                                            <div>Show Location</div>
                                            <div className="text-xs text-gray-500">Display your school to other users</div>
                                        </div>
                                        <input 
                                            type="checkbox" 
                                            checked={settings.showLocation}
                                            onChange={(e) => setSettings({...settings, showLocation: e.target.checked})}
                                            className="w-5 h-5"
                                        />
                                    </label>
                                </div>
                            </div>

                            <div>
                                <h3 className="font-semibold mb-4">About</h3>
                                <div className="space-y-2 text-sm text-gray-600">
                                    <p>Signed in as: <strong>{currentUser.email}</strong></p>
                                    <p className="text-xs text-gray-500">Version 1.0.0</p>
                                </div>
                            </div>
                        </div>

                        <div className="mt-6 pt-6 border-t">
                            <button 
                                onClick={() => alert('Settings saved!')}
                                className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700"
                            >
                                Save Settings
                            </button>
                        </div>
                    </div>
                </div>
            );
        }

        function EditBook({ book, onSave, onCancel }) {
            const [formData, setFormData] = useState({
                ...book
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                onSave({
                    ...formData,
                    price: formData.listingType === 'donate' ? 0 : parseFloat(formData.price),
                    originalPrice: parseFloat(formData.originalPrice)
                });
            };

            return (
                <div className="max-w-2xl mx-auto">
                    <button 
                        onClick={onCancel}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Cancel
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">Edit Book Listing</h2>
                        
                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold mb-2">Listing Type</label>
                                <select
                                    value={formData.listingType}
                                    onChange={(e) => setFormData({...formData, listingType: e.target.value})}
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                >
                                    <option value="sell">üí∞ Sell</option>
                                    <option value="donate">üíù Donate (Free)</option>
                                    <option value="trade">üîÑ Trade</option>
                                </select>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Book Title *</label>
                                <input
                                    type="text"
                                    value={formData.title}
                                    onChange={(e) => setFormData({...formData, title: e.target.value})}
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div className="grid grid-cols-2 gap-4">
                                <div>
                                    <label className="block text-sm font-semibold mb-2">Subject *</label>
                                    <select
                                        value={formData.subject}
                                        onChange={(e) => setFormData({...formData, subject: e.target.value})}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                        required
                                    >
                                        <option>Biology</option>
                                        <option>Chemistry</option>
                                        <option>Physics</option>
                                        <option>Mathematics</option>
                                        <option>History</option>
                                        <option>English</option>
                                        <option>Psychology</option>
                                        <option>Other</option>
                                    </select>
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold mb-2">Edition Year *</label>
                                    <input
                                        type="text"
                                        value={formData.edition}
                                        onChange={(e) => setFormData({...formData, edition: e.target.value})}
                                        className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                        required
                                    />
                                </div>
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Condition *</label>
                                <select
                                    value={formData.condition}
                                    onChange={(e) => setFormData({...formData, condition: e.target.value})}
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                >
                                    <option>Excellent</option>
                                    <option>Good</option>
                                    <option>Fair</option>
                                    <option>Acceptable</option>
                                </select>
                            </div>

                            {formData.listingType !== 'donate' && (
                                <div className="grid grid-cols-2 gap-4">
                                    <div>
                                        <label className="block text-sm font-semibold mb-2">Your Price * ($)</label>
                                        <input
                                            type="number"
                                            value={formData.price}
                                            onChange={(e) => setFormData({...formData, price: e.target.value})}
                                            min="0"
                                            step="0.01"
                                            className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                            required
                                        />
                                    </div>

                                    <div>
                                        <label className="block text-sm font-semibold mb-2">Original Price ($)</label>
                                        <input
                                            type="number"
                                            value={formData.originalPrice}
                                            onChange={(e) => setFormData({...formData, originalPrice: e.target.value})}
                                            min="0"
                                            step="0.01"
                                            className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                            required
                                        />
                                    </div>
                                </div>
                            )}

                            <div>
                                <label className="block text-sm font-semibold mb-2">Description *</label>
                                <textarea
                                    value={formData.description}
                                    onChange={(e) => setFormData({...formData, description: e.target.value})}
                                    rows="4"
                                    className="w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div className="flex space-x-2">
                                <button
                                    type="button"
                                    onClick={onCancel}
                                    className="flex-1 py-3 border-2 border-gray-300 rounded-lg font-semibold hover:bg-gray-50"
                                >
                                    Cancel
                                </button>
                                <button
                                    type="submit"
                                    className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700"
                                >
                                    Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        function Login({ onLogin, onSwitchToSignup }) {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                const success = onLogin(email, password);
                if (!success) {
                    setError('Invalid email or password');
                } else {
                    setError('');
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center p-4">
                    <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md">
                        <div className="text-center mb-8">
                            <span className="text-6xl">üìö</span>
                            <h1 className="text-3xl font-bold text-gray-900 mt-4">AP Book Exchange</h1>
                            <p className="text-gray-600 mt-2">Affordable books for all students</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold mb-2">Email</label>
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    placeholder="your@email.com"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Password</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            {error && (
                                <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                                    {error}
                                </div>
                            )}

                            <button
                                type="submit"
                                className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                            >
                                Login
                            </button>
                        </form>

                        <div className="mt-6 text-center">
                            <p className="text-gray-600 text-sm">
                                Don't have an account?{' '}
                                <button
                                    onClick={onSwitchToSignup}
                                    className="text-blue-600 hover:text-blue-700 font-semibold"
                                >
                                    Sign Up
                                </button>
                            </p>
                        </div>

                        <div className="mt-4 p-4 bg-blue-50 rounded-lg">
                            <p className="text-xs text-blue-700 text-center">
                                <strong>Demo Account:</strong> demo@student.com / demo123
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        function Signup({ onSignup, onSwitchToLogin }) {
            const [email, setEmail] = useState('');
            const [password, setPassword] = useState('');
            const [confirmPassword, setConfirmPassword] = useState('');
            const [name, setName] = useState('');
            const [error, setError] = useState('');

            const handleSubmit = (e) => {
                e.preventDefault();
                
                if (password !== confirmPassword) {
                    setError('Passwords do not match');
                    return;
                }

                if (password.length < 6) {
                    setError('Password must be at least 6 characters');
                    return;
                }

                const result = onSignup(email, password, name);
                if (!result.success) {
                    setError(result.message);
                } else {
                    setError('');
                }
            };

            return (
                <div className="min-h-screen bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center p-4">
                    <div className="bg-white rounded-lg shadow-2xl p-8 w-full max-w-md">
                        <div className="text-center mb-8">
                            <span className="text-6xl">üìö</span>
                            <h1 className="text-3xl font-bold text-gray-900 mt-4">Create Account</h1>
                            <p className="text-gray-600 mt-2">Join our student community</p>
                        </div>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold mb-2">Full Name</label>
                                <input
                                    type="text"
                                    value={name}
                                    onChange={(e) => setName(e.target.value)}
                                    placeholder="John Doe"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Email</label>
                                <input
                                    type="email"
                                    value={email}
                                    onChange={(e) => setEmail(e.target.value)}
                                    placeholder="your@email.com"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Password</label>
                                <input
                                    type="password"
                                    value={password}
                                    onChange={(e) => setPassword(e.target.value)}
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Confirm Password</label>
                                <input
                                    type="password"
                                    value={confirmPassword}
                                    onChange={(e) => setConfirmPassword(e.target.value)}
                                    placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            {error && (
                                <div className="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm">
                                    {error}
                                </div>
                            )}

                            <button
                                type="submit"
                                className="w-full bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700 transition-colors"
                            >
                                Create Account
                            </button>
                        </form>

                        <div className="mt-6 text-center">
                            <p className="text-gray-600 text-sm">
                                Already have an account?{' '}
                                <button
                                    onClick={onSwitchToLogin}
                                    className="text-blue-600 hover:text-blue-700 font-semibold"
                                >
                                    Login
                                </button>
                            </p>
                        </div>
                    </div>
                </div>
            );
        }

        function EditProfile({ currentUser, onSave, onBack }) {
            const [formData, setFormData] = useState({
                name: currentUser.name,
                bio: currentUser.bio || '',
                email: currentUser.email
            });

            const handleSubmit = (e) => {
                e.preventDefault();
                onSave(formData);
                alert('Profile updated successfully!');
                onBack();
            };

            return (
                <div className="max-w-2xl mx-auto">
                    <button 
                        onClick={onBack}
                        className="mb-4 text-blue-600 hover:text-blue-800 flex items-center"
                    >
                        ‚Üê Back to Profile
                    </button>

                    <div className="bg-white rounded-lg shadow-lg p-6">
                        <h2 className="text-2xl font-bold mb-6">Edit Profile</h2>

                        <form onSubmit={handleSubmit} className="space-y-4">
                            <div>
                                <label className="block text-sm font-semibold mb-2">Full Name *</label>
                                <input
                                    type="text"
                                    value={formData.name}
                                    onChange={(e) => setFormData({...formData, name: e.target.value})}
                                    placeholder="Your full name"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Email *</label>
                                <input
                                    type="email"
                                    value={formData.email}
                                    onChange={(e) => setFormData({...formData, email: e.target.value})}
                                    placeholder="your@email.com"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                    required
                                />
                            </div>

                            <div>
                                <label className="block text-sm font-semibold mb-2">Bio</label>
                                <textarea
                                    value={formData.bio}
                                    onChange={(e) => setFormData({...formData, bio: e.target.value})}
                                    placeholder="Tell other students about yourself..."
                                    rows="4"
                                    className="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:outline-none"
                                />
                                <p className="text-xs text-gray-500 mt-1">
                                    This will be visible to other users (optional)
                                </p>
                            </div>

                            <div className="flex space-x-2">
                                <button
                                    type="button"
                                    onClick={onBack}
                                    className="flex-1 py-3 border-2 border-gray-300 rounded-lg font-semibold hover:bg-gray-50"
                                >
                                    Cancel
                                </button>
                                <button
                                    type="submit"
                                    className="flex-1 bg-blue-600 text-white py-3 rounded-lg font-semibold hover:bg-blue-700"
                                >
                                    Save Changes
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
            );
        }

        ReactDOM.render(<App />, document.getElementById('root'));
    </script>
</body>
</html>
